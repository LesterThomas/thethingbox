<!--
  Copyright 2014 IBM Corp.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0


  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->


<script type="text/x-red" data-template-name="timestamp">
	<div class="form-row">
		<label for="node-input-format"><i class="icon-tasks"></i> Format</label>
		<select id="node-input-format" style="width:150px">
			<option value="basic">Default format</option>
			<option value="date">Date format</option>
			<option value="time">Time format</option>
			<option value="iso">ISO format</option>
		</select>
	</div>
	
	<br/>
	
	<div class="form-row">
		<label for="node-input-shift"><i class="icon-tasks"></i> Type</label>
		<select id="node-input-shift" style="width:150px">
			<option value="gmt">GMT +00</option>
			<option value="shift">GMT +jetlag</option>
		</select>
	</div>
	
	<br/>

	<div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i>Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="timestamp">
	<font size="-2">Adds the timestamp to the message</font>
	<h2><p>Timestamp</p></h2>
	<font size="-1"><p>By default this node returns the timestamp (in milliseconds). This timestamp is written in the message's property "timestamp".</p></font><br/>
	<font size="+1"><p><b>Option Format</b></p>
	<p>-Option Default</p>
	<font size="-1"><p>This option returns the value of the timestamp (1402903356144).</p></font>
	<p>-Option Date</p>
	<font size="-1"><p>This option returns the date of the timestamp (Tuesday, December 31, 2013).</p></font>
	<p>-Option Time</p>
	<font size="-1"><p>This option returns the time of the timestamp (23:59:59).</p></font>
	<p>-Option ISO</p>
	<font size="-1"><p>This option returns the timestamp in the ISO format (2013-12-31T23:59:59.999Z).</p></font><br/>

	<font size="+1"><p><b>Option Type</b></p>
	<p>-Option GMT+00</p>
	<font size="-1"><p>This option returns the timestamp with the GMT+00:00.</p></font>
	<p>-Option GMT+jetlag</p>
	<font size="-1"><p>This option returns the timestamp with your jetlag.</p></font>
</script>

<script type="text/javascript">
    RED.nodes.registerType('timestamp',{
        category: 'function',      // the palette category
        color: "#FFD1DF",
        defaults: {             // defines the editable properties of the node
            name: {value:""},
			format: {value:"basic"},
			shift: {value:"gmt"},
        },
        inputs:1,               // set the number of inputs - only 0 or 1
        outputs:1,              // set the number of outputs - 0 to n
        
        icon: "timestamp.png",     // saved in  icons/myicon.png
        label: function() {     // sets the default label contents
            return this.name||this.to||"timestamp";
        },
        labelStyle: function() { // sets the class to apply to the label
            return this.name?"node_label_italic":"";
        },
    });
</script>